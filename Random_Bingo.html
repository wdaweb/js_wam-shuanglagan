<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BingoéŠæˆ²(ä½œæ¥­ï¼šæ‰“åœ°é¼ ï¼‰</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      list-style: none;
      font-family: 'Noto Sans TC', 'Microsoft JhengHei', sans-serif;
      box-sizing: border-box;
      font-size: 20px;
    }
    html{
      height: 100%;
      width: 100%;
      display: flex;  
      justify-content: center;    
      box-sizing: border-box;
      background: #000; 
      color: #FFF;     
      
    }
    #title::before{
      content: 'BingoéŠæˆ²';
      display: inline-block;
      top: 80px;
      left:-10px;
      position:relative;
      width: 300px;
      height: auto;
      -webkit-text-stroke: 2px rgb(201, 76, 101);
      color: transparent;
      font-size: 40px;
      font-weight: 800;
      letter-spacing: 8px;
      text-decoration: none;
      border:5px solid cyan;
      border-radius: 15px;

      /*æ•´é«”æ›é¡è‰²*/
      
      text-align: center;
      clear: both;
      transform: scale(1.5);

    }
    #game {
      position: relative;
      
      top: 220px;
      left: -80%;
      cursor:pointer;
      border-collapse: collapse;
    }
    .holes {
      width: 150px;
      height: 150px;
      border: 1px solid lightblue;
      background: white;
      color: #000;
      -webkit-text-stroke: 1px #000;
      font-size: 50px;
      text-align: center;

    }

    .lightyellow {
      background: rgb(252, 157, 34);
    }

    .blue {
      background: blue;
    }

    

    table#scoreAll {
      width: 500px;
      height: 300px;
      padding: 40px;

      position: relative;
      left: 50%;
      top: -500px;
      font-size: 10px;
      font-weight: 800;
      border:3px solid rgb(89, 168, 89);
      border-radius: 15px;      
      
    }


    table#scoreAll td {
      text-align: center;
      width: 20px;
    }
    #others{
      width: 250px;
      height: 150px;
      position: relative;
      text-align: center;
      line-height: 35px;
      left: 50%;
      top: -270px;
      border:5px solid rgb(89, 168, 89);
      border-radius: 15px;
      padding: 20px;
    }
    #btn-rules{
      width: 250px;
      height:150px;
      padding: 50px;
      text-align: center;

      position: relative; 
      cursor: pointer;     
      left: 100%;
      top: -500px;
      font-size: 50px;
      font-weight: 800;
      border:5px solid rgb(89, 168, 89);
      border-radius: 15px;
      padding:25px;
    }
    #rules{
      position: relative;
      left: 50%;
      top: -500px;
      font-size: 10px;
      font-weight: 800;
      border:3px solid rgb(89, 168, 89);
      border-radius: 15px;
      display: none;
    }
    /* coptright */
    .cc{
    position: relative;
    top: -400px;
    left: -100px;
		}
  </style>
</head>

<body>
  <div id="title"></div>
  <table id="game">
    <tr>
      <td class="holes" id="hole7">-</td>
      <td class="holes" id="hole8">-</td>
      <td class="holes" id="hole9">-</td>
    </tr>
    <tr>
      <td class="holes" id="hole4">-</td>
      <td class="holes" id="hole5">-</td>
      <td class="holes" id="hole6">-</td>
    </tr>
    <tr>
      <td class="holes" id="hole1">-</td>
      <td class="holes" id="hole2">-</td>
      <td class="holes" id="hole3">-</td>
    </tr>
  </table>
  <div id="others">
    <input type="button" value="é–‹å§‹éŠæˆ²" id="btn-start">    
    <p id="time">èŠ±äº† <span id="text-countup">0</span> ç§’</p>    
    <p id="score">ç›®å‰åˆ†æ•¸: <span id="text-score">0</span>åˆ†</p>
  </div>

  <br><br><br>

  <div id="btn-rules">è¦å‰‡</div>
  <div id="rules">
    <pre>
      è¦å‰‡ï¼š
        1.é»æ“Šé–‹å§‹å¾Œ
        2.ä¹å®®æ ¼å°‡éš¨æ©Ÿå‡ºç¾æ•¸å­—
        3.ç•¶æ ¼å­è®Šç‚ºé»ƒè‰²å³å¯é»æ“Š
        4.ç•¶åŒå€‹æ•¸å­—é€£æˆä¸€æ’å³å¾—ä¸€åˆ†
        5.ç•¶æ‰€æœ‰æ ¼å­è®Šç‚ºè—è‰²ï¼ŒéŠæˆ²çµæŸ
    </pre>
    <pre>
      åˆ†æ•¸è¨ˆç®—ï¼š
        1.é€™å€‹éŠæˆ²æ¯”çš„æ˜¯èª°æœ€å¿«å®Œæˆæ¯”è³½
        2.ç•¶éŠæˆ²çµæŸæ™‚ï¼Œç§’æ•¸å°æ–¼ç´€éŒ„ï¼Œå³åˆ·æ–°ç´€éŒ„
        3.ä¸åŒåˆ†æ•¸ï¼Œåˆ†é–‹è¨ˆç®—
    </pre>
    
  </div>


  <table id="scoreAll">
    <tr>
      <td></td>
      <td>ç©å®¶</td>
      <td width="100px">æœ€å¿«ç´€éŒ„(ç§’)</td>
    </tr>
    <tr id="score1">
      <td class="stages">1åˆ†:</td>
      <td class="players">1000</td>
      <td class="scoreSecs">1000</td>
    </tr>
    <tr id="score2">
      <td class="stages">2åˆ†:</td>
      <td class="players">1000</td>
      <td class="scoreSecs">1000</td>
    </tr>
    <tr id="score3">
      <td class="stages">3åˆ†:</td>
      <td class="players">1000</td>
      <td class="scoreSecs">1000</td>
    </tr>
    <tr id="score4">
      <td class="stages">4åˆ†:</td>
      <td class="players">1000</td>
      <td class="scoreSecs">1000</td>
    </tr>
    <tr id="score5">
      <td class="stages">5åˆ†:</td>
      <td class="players">1000</td>
      <td class="scoreSecs">1000</td>
    </tr>
    <tr id="score6">
      <td class="stages">6åˆ†:</td>
      <td class="players">1000</td>
      <td class="scoreSecs">1000</td>
    </tr>
    <tr id="score7">
      <td class="stages">7åˆ†:</td>
      <td class="players">1000</td>
      <td class="scoreSecs">1000</td>
    </tr>
    <tr id="score8">
      <td class="stages">8åˆ†:</td>
      <td class="players">1000</td>
      <td class="scoreSecs">1000</td>
    </tr>
  </table>
  <!-- copyright -->
  <p class="cc"style="text-align: center;">&copy; Made with ğŸ¤¯&ğŸ’› by Shuanglagan</p>
  


  <script>


    //é–‹å§‹è¨­å®š

    //DOM
    const btnStart = document.getElementById('btn-start')
    const holes = document.getElementsByClassName('holes')
    const textScore = document.getElementById('text-score')
    const textHighscorePlayer = document.getElementById('highscore-player')
    const textHighscore = document.getElementById('highscore-score')
    const textCountup = document.getElementById('text-countup')
    const scoreSecs = document.getElementsByClassName('scoreSecs')
    const players = document.getElementsByClassName('players')



    

    let score = 0
    let timer = 0
    let countup = 0
    let highscore = [
      { name: '', score: 1000 },
      { name: '', score: 1000 },
      { name: '', score: 1000 },
      { name: '', score: 1000 },
      { name: '', score: 1000 },
      { name: '', score: 1000 },
      { name: '', score: 1000 },
      { name: '', score: 1000 }]
    const highStorage = JSON.parse(localStorage.getItem('wam'))
    if (highStorage !== null) {
      highscore = highStorage
    }
    for (let i = 0; i < 8; i++) {
      players[i].innerText = highscore[i].name
      scoreSecs[i].innerText = highscore[i].score
    }
    //æŒ‰ä¸€æ¬¡æŒ‰éˆ•çš„çµæœ
    btnStart.onclick = () => {
      btnStart.disabled = true
      score = 0
      textScore.innerText = score

      countup = 0
      textCountup.innerText = countup

      timer = setInterval(game, 1000)
      //å…ˆå‘¼å«ä¸€æ¬¡
      game()
    }


    //ä¸»ç¨‹å¼
    const game = () => {
      //è®Šè‰² && æ•¸å­—éš¨æ©Ÿ
      for (const hole of holes) {
        hole.classList.remove('lightyellow')

      }
      for (let j = 0; j < 3; j++) {
        const randomA = Math.floor(Math.random() * 9)
        holes[randomA].classList.add('lightyellow')

        if (!(holes[randomA].classList.contains('blue'))) {

          const randomB = Math.floor(Math.random() * 2 + 1)
          holes[randomA].innerText = randomB
        }
      }



      countup++
      textCountup.innerText = countup



      //çµæŸå‹•ä½œ
      if ((score == 8) ||
        (holes[0].classList.contains('blue') &&
          holes[1].classList.contains('blue') &&
          holes[2].classList.contains('blue') &&
          holes[3].classList.contains('blue') &&
          holes[4].classList.contains('blue') &&
          holes[5].classList.contains('blue') &&
          holes[6].classList.contains('blue') &&
          holes[7].classList.contains('blue') &&
          holes[8].classList.contains('blue')

        )) {
        clearInterval(timer)
        alert(`ä½ å¾—åˆ° ${score} åˆ†`)
        alert(`ä½ èŠ±äº† ${countup} ç§’`)
        btnStart.disabled = false
        for (const hole of holes) {
          hole.classList.remove('lightyellow')
          hole.classList.remove('blue')
          hole.innerText = 0
        }


        //é«˜åˆ†ï¼šåˆ¤å®šï¼‹å„²å­˜
        for (let k = 0; k < 8; k++) {
          if ((score == k + 1) && (countup < scoreSecs[k].innerText)) {
            players[k].innerText = prompt('æœ€é«˜åˆ†! è«‹è¼¸å…¥åå­—')
            if (players[k].innerText.length == 0) {
              players[k].innerText = 'è·¯äºº'
            }
            scoreSecs[k].innerText = countup
            highscore[k].name = players[k].innerText
            highscore[k].score = scoreSecs[k].innerText

          }
        }
        localStorage.setItem('wam', JSON.stringify(highscore))



      }







      //åŸæœ¬çš„ã€€é«˜åˆ†ï¼šåˆ¤å®šï¼‹å„²å­˜


      // if (score > highscore.score) {
      //   audio.play()
      //   highscore.score = score

      //   å•é¡Œ!!!
      //   ç¬¬ä¸€æ¬¡æœƒè·³å‡ºä¾†

      //   highscore.name = prompt('æœ€é«˜åˆ†! è«‹è¼¸å…¥åå­—')
      //   if (highscore.name === null || highscore.name.length === 0) {
      //     highscore.name = 'è·¯äºº'
      //   }
      //   textHighscorePlayer.innerText = highscore.name
      //   textHighscore.innerText = highscore.score

      //   ä½¿ç”¨localstorage  å­˜è®€æ±è¥¿
      //   å­˜key  value(valueéƒ½æ˜¯æ–‡å­—),å¦å¤–å†æ‹‰å‡ºä¾†
      //   localStorage.setItemï¼šç€è¦½å™¨ä¸­å„²å­˜å…§å®¹
      //   JSON Stringifyï¼ˆå­—ä¸²åŒ–ï¼‰ï¼šå°é›»è…¦ä¾†èªªï¼Œå°‡ JSON ç‰©ä»¶ï¼ˆObjectï¼‰è½‰æˆå­—ä¸²å¾Œï¼Œæ‰èƒ½å„²å­˜æˆ–å‚³é€ã€‚

      //   localStorage.setItem('wam', JSON.stringify(highscore))
      // }
    }





    //å¯ç”¨æ»‘é¼ ç©
    //ç´…è—å–ä»£
    for (const hole of holes) {
      hole.onclick = () => {
        let tempscore = 0
        if (hole.classList.contains('lightyellow')) {
          hole.classList.replace('lightyellow', 'blue')

          // score++
          if ((holes[0].innerText == holes[1].innerText && holes[1].innerText == holes[2].innerText) && (holes[0].classList.contains('blue')) && (holes[1].classList.contains('blue')) && (holes[2].classList.contains('blue'))) { tempscore++ }
          if ((holes[3].innerText == holes[4].innerText && holes[4].innerText == holes[5].innerText) && (holes[3].classList.contains('blue')) && (holes[4].classList.contains('blue')) && (holes[5].classList.contains('blue'))) { tempscore++ }
          if ((holes[6].innerText == holes[7].innerText && holes[7].innerText == holes[8].innerText) && (holes[6].classList.contains('blue')) && (holes[7].classList.contains('blue')) && (holes[8].classList.contains('blue'))) { tempscore++ }
          if ((holes[0].innerText == holes[3].innerText && holes[3].innerText == holes[6].innerText) && (holes[0].classList.contains('blue')) && (holes[3].classList.contains('blue')) && (holes[6].classList.contains('blue'))) { tempscore++ }
          if ((holes[1].innerText == holes[4].innerText && holes[4].innerText == holes[7].innerText) && (holes[1].classList.contains('blue')) && (holes[4].classList.contains('blue')) && (holes[7].classList.contains('blue'))) { tempscore++ }
          if ((holes[2].innerText == holes[5].innerText && holes[5].innerText == holes[8].innerText) && (holes[2].classList.contains('blue')) && (holes[5].classList.contains('blue')) && (holes[8].classList.contains('blue'))) { tempscore++ }
          if ((holes[0].innerText == holes[4].innerText && holes[4].innerText == holes[8].innerText) && (holes[0].classList.contains('blue')) && (holes[4].classList.contains('blue')) && (holes[8].classList.contains('blue'))) { tempscore++ }
          if ((holes[2].innerText == holes[4].innerText && holes[4].innerText == holes[6].innerText) && (holes[2].classList.contains('blue')) && (holes[4].classList.contains('blue')) && (holes[6].classList.contains('blue'))) { tempscore++ }
          console.log('tempscore:' + tempscore);
          score = tempscore
          textScore.innerText = tempscore

        }
      }
    }

    //å¯ç”¨å°éµç›¤ç©
    // æ˜¯æ•¸å­— && æ•¸å­—å°éµç›¤è£¡
    // document.onkeydown = (event) => {

    //   if (!isNaN(event.key) && event.code.includes('Numpad')) {
    //     const target = document.getElementById(`hole${event.key}`)
    //     if (target !== null && target.classList.contains('lightyellow')) {
    //       target.classList.replace('lightyellow', 'blue')

    //       if (

    //         ((parseInt(holes[0].innerText) == parseInt(holes[1].innerText) && parseInt(holes[1].innerText) == parseInt(holes[2].innerText)) ||
    //           (parseInt(holes[3].innerText) == parseInt(holes[4].innerText) && parseInt(holes[4].innerText) == parseInt(holes[5].innerText)) ||
    //           (parseInt(holes[6].innerText) == parseInt(holes[7].innerText) && parseInt(holes[7].innerText) == parseInt(holes[8].innerText)) ||
    //           (parseInt(holes[0].innerText) == parseInt(holes[4].innerText) && parseInt(holes[4].innerText) == parseInt(holes[8].innerText)) ||
    //           (parseInt(holes[2].innerText) == parseInt(holes[4].innerText) && parseInt(holes[4].innerText) == parseInt(holes[6].innerText)))

    //       ) { score++ }

    //       textScore.innerText = score
    //     }
    //   }
    // }
  </script>
  <script src="./jquery-3.6.0.min.js"></script>
  <!-- cdn -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
 
  <script>

    $('#btn-rules').click(function(){
      $('#rules').slideToggle('slow')
    })
  </script>
  
</body>

</html>